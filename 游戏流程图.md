# 修仙奇缘（Trust of Immortality）游戏流程图

## 游戏核心流程

```mermaid
graph TD
    A[启动游戏] --> B[主菜单]
    B -->|开始新游戏| C[输入角色名称]
    C --> D[游戏主界面]
    
    D -->|选择修炼| E[修炼界面]
    E -->|选择功法| E1[选择修炼方式]
    E1 -->|开始修炼| E2[获得属性提升和经验]
    E2 -->|停止修炼| E3[返回游戏主界面]
    
    D -->|选择战斗| F[战斗界面]
    F -->|选择技能攻击| F1[伤害计算]
    F1 -->|胜利| F2[获得奖励]
    F1 -->|失败| F3[返回游戏主界面]
    F2 --> F4[返回游戏主界面]
    
    D -->|选择背包| H[背包界面]
    H -->|使用物品| H1[应用物品效果]
    H1 --> H2[返回游戏主界面]
    
    D -->|升级突破| I[境界提升]
    I --> D
```

## 详细游戏流程说明

### 1. 游戏启动流程
- 游戏启动 → 检查资源文件是否完整 → 加载主菜单
- 如果资源不完整，显示资源错误界面，提示用户添加必要资源

### 2. 主菜单流程
- 显示游戏标题和菜单选项：开始新游戏、加载游戏、选项、退出
- 玩家选择"开始新游戏" → 输入角色名称 → 创建新角色 → 进入游戏主界面
- 玩家选择"加载游戏" → 显示存档列表 → 选择存档 → 加载游戏数据 → 进入游戏主界面

### 3. 游戏主界面流程
- 显示玩家信息（姓名、境界、等级）
- 显示玩家属性（气力、神识、体魄、命运）
- 显示已学功法列表
- 显示故事内容和可选行动（修炼、战斗、背包）

### 4. 修炼系统流程
```mermaid
flowchart TD
    A[进入修炼界面] --> B[显示当前属性]
    B --> C[显示可用功法列表]
    C --> D[选择修炼功法]
    D --> E[选择修炼方式]
    E --> F{开始修炼}
    F -->|是| G[启动修炼计时器]
    G --> H[每分钟获得经验值]
    H --> I[积累足够经验突破等级]
    I --> J{继续修炼}
    J -->|是| G
    J -->|否| K[停止修炼]
    F -->|否| K
    K --> L[应用属性加成]
    L --> M[返回游戏主界面]
```

#### 修炼方式与效果
- **气元修炼**：气力+3，神识+1
- **心神修炼**：神识+3，气力+1
- **炼体修炼**：体魄+3，气力+1

### 5. 战斗系统流程
```mermaid
flowchart TD
    A[进入战斗界面] --> B[显示敌人信息]
    B --> C[显示玩家信息]
    C --> D[回合开始]
    D --> E{玩家行动}
    E -->|攻击| F[计算伤害]
    E -->|技能| G[使用技能]
    E -->|物品| H[使用物品]
    E -->|逃跑| I[尝试逃跑]
    F --> J[敌人受伤]
    G --> J
    H --> J
    I -->|成功| K[结束战斗]
    I -->|失败| L[敌人行动]
    J --> M{敌人是否击败}
    M -->|是| N[获得奖励]
    M -->|否| L
    L --> O[玩家受伤]
    O --> P{玩家是否击败}
    P -->|是| Q[战斗失败]
    P -->|否| D
    N --> K
    Q --> K
    K --> R[返回游戏主界面]
```

### 6. 背包系统流程
```mermaid
flowchart TD
    A[进入背包界面] --> B[显示物品列表]
    B --> C[选择物品]
    C --> D{是否使用}
    D -->|是| E[应用物品效果]
    D -->|否| F[返回物品列表]
    E --> G[更新物品数量]
    G --> H[返回游戏主界面]
    F --> B
```